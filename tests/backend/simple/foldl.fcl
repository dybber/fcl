sig runtestBlock : [int] -> Program <block> [int]<block>
fun runtestBlock arr =
  splitUp 32 arr
   |> mapPull (foldl addi 0)
   |> mapPull (return <thread>)
   |> concat 1

sig runtest : int -> Program <grid> [int]<grid>
fun runtest n =
  splitUp n (iota n)
   |> mapPull runtestBlock
   |> concat 32

sig main : Program <grid> [int]
fun main =
 do { a <- runtest (32*32)
    ; forceAndPrint 32 a
    }
